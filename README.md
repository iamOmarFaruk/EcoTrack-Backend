# EcoTrack Backend API\n\nğŸŒ± **Sustainability Platform Backend** - A clean, well-structured Express.js API for the EcoTrack platform where users join challenges, attend events, share tips, and track environmental impact.\n\n## ğŸš€ Quick Start\n\n### Prerequisites\n- Node.js (v16 or higher)\n- npm or yarn\n\n### Installation\n\n1. **Clone and setup**:\n   ```bash\n   cd EcoTrack-Backend\n   npm install\n   ```\n\n2. **Environment setup**:\n   ```bash\n   # The .env file is already created with default values\n   # Update the values as needed for your environment\n   ```\n\n3. **Start the server**:\n   ```bash\n   # Development mode with auto-restart\n   npm run dev\n   \n   # Or production mode\n   npm start\n   ```\n\n4. **Test the API**:\n   ```bash\n   curl http://localhost:5000/health\n   ```\n\n## ğŸ“‹ Available Endpoints\n\nThe API endpoints are now available and ready to use with a real database connection. test all endpoints immediately!\n\n### ğŸƒâ€â™‚ï¸ Health Check\n- `GET /health` - Server health status\n\n### ğŸ¯ Challenges API\n- `GET /api/challenges` - List all challenges\n- `GET /api/challenges/:id` - Get challenge details  \n- `POST /api/challenges` - Create new challenge\n- `PATCH /api/challenges/:id` - Update challenge\n- `DELETE /api/challenges/:id` - Delete challenge\n- `POST /api/challenges/join/:id` - Join challenge\n- `POST /api/challenges/leave/:id` - Leave challenge\n- `PATCH /api/challenges/:id/progress` - Update progress\n- `POST /api/challenges/:id/complete` - Complete challenge\n- `GET /api/challenges/:id/participants` - Get participants\n\n### ğŸ’¡ Tips API\n- `GET /api/tips` - List all tips\n- `GET /api/tips/popular` - Get popular tips\n- `GET /api/tips/category/:category` - Tips by category\n- `GET /api/tips/:id` - Get tip details\n- `POST /api/tips` - Create new tip\n- `PATCH /api/tips/:id` - Update tip\n- `DELETE /api/tips/:id` - Delete tip\n- `POST /api/tips/:id/vote` - Vote on tip\n- `DELETE /api/tips/:id/vote` - Remove vote\n\n### ğŸ‰ Events API\n- `GET /api/events` - List all events\n- `GET /api/events/upcoming` - Get upcoming events\n- `GET /api/events/:id` - Get event details\n- `POST /api/events` - Create new event\n- `PATCH /api/events/:id` - Update event\n- `DELETE /api/events/:id` - Delete event\n- `POST /api/events/:id/register` - Register for event\n- `DELETE /api/events/:id/register` - Unregister from event\n- `PATCH /api/events/:id/attendance` - Mark attendance\n- `GET /api/events/:id/registrations` - Get registrations\n\n### ğŸ‘¤ Users API\n- `GET /api/users/profile` - Get current user profile\n- `PATCH /api/users/profile` - Update profile\n- `GET /api/users/:id` - Get public user profile\n- `GET /api/users/:id/activities` - Get user activities\n- `GET /api/users/:id/challenges` - Get user challenges\n- `GET /api/users/:id/stats` - Get user statistics\n\n### ğŸ“Š Statistics API\n- `GET /api/stats/community` - Global community stats\n- `GET /api/stats/user` - Current user stats\n- `GET /api/stats/impact` - Environmental impact metrics\n- `GET /api/stats/leaderboard` - Leaderboard data\n- `GET /api/stats/challenges/:id` - Challenge-specific stats\n\n## ğŸ§ª Testing the API\n\n### Sample Requests\n\n**Get all challenges:**\n```bash\ncurl \"http://localhost:5000/api/challenges?page=1&limit=10\"\n```\n\n**Create a new tip:**\n```bash\ncurl -X POST \"http://localhost:5000/api/tips\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"title\": \"Save Water While Brushing\",\n    \"content\": \"Turn off the tap while brushing your teeth to save up to 8 gallons of water per day.\",\n    \"category\": \"Water Conservation\"\n  }'\n```\n\n**Vote on a tip:**\n```bash\ncurl -X POST \"http://localhost:5000/api/tips/674b1a2f8e4d5c1a2b3c4d70/vote\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"voteType\": \"upvote\"}'\n```\n\n**Get community statistics:**\n```bash\ncurl \"http://localhost:5000/api/stats/community\"\n```\n\n## ğŸ—ï¸ Project Structure\n\n```\nsrc/\nâ”œâ”€â”€ controllers/         # Business logic\nâ”‚   â”œâ”€â”€ challengeController.js\nâ”‚   â”œâ”€â”€ tipController.js\nâ”‚   â”œâ”€â”€ eventController.js\nâ”‚   â”œâ”€â”€ userController.js\nâ”‚   â””â”€â”€ statsController.js\nâ”œâ”€â”€ routes/             # API routes\nâ”‚   â”œâ”€â”€ challenges.js\nâ”‚   â”œâ”€â”€ tips.js\nâ”‚   â”œâ”€â”€ events.js\nâ”‚   â”œâ”€â”€ users.js\nâ”‚   â””â”€â”€ stats.js\nâ”œâ”€â”€ models/             # Mock data models\nâ”‚   â”œâ”€â”€ challengeModel.js\nâ”‚   â”œâ”€â”€ tipModel.js\nâ”‚   â”œâ”€â”€ eventModel.js\nâ”‚   â””â”€â”€ userModel.js\nâ”œâ”€â”€ middleware/         # Custom middleware\nâ”‚   â”œâ”€â”€ auth.js         # Authentication (ready for Firebase)\nâ”‚   â”œâ”€â”€ validation.js   # Request validation\nâ”‚   â”œâ”€â”€ errorHandler.js # Global error handling\nâ”‚   â””â”€â”€ notFound.js     # 404 handler\nâ”œâ”€â”€ utils/             # Utility functions\nâ”œâ”€â”€ app.js            # Express app configuration\nâ””â”€â”€ server.js         # Server entry point\n```\n\n## ğŸ”§ Features\n\n### âœ… Currently Implemented\n- **Clean MVC Architecture** - Well-organized, maintainable code\n- **Complete CRUD Operations** - For challenges, tips, events, users\n- **Mock Data Models** - Realistic test data for all endpoints\n- **Request Validation** - Using Joi for robust input validation\n- **Error Handling** - Comprehensive error handling middleware\n- **CORS & Security** - Helmet security headers, CORS configuration\n- **Rate Limiting** - Protection against abuse\n- **Pagination** - For all list endpoints\n- **Filtering & Sorting** - Advanced query capabilities\n- **Standardized Responses** - Consistent API response format\n\n### ğŸš§ Ready for Integration\n- **Firebase Auth** - Authentication middleware prepared\n- **MongoDB Integration** - Models ready for database connection\n- **File Upload** - Structure for image upload (Cloudinary/AWS)\n- **Real-time Features** - Foundation for WebSocket integration\n\n## ğŸ¨ API Response Format\n\n### Success Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"challenges\": [...]\n  },\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 100,\n    \"totalPages\": 5,\n    \"hasNext\": true,\n    \"hasPrev\": false\n  },\n  \"message\": \"Optional success message\"\n}\n```\n\n### Error Response\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"message\": \"User-friendly error message\",\n    \"code\": \"ERROR_CODE\",\n    \"details\": {...}\n  }\n}\n```\n\n## ğŸš€ Next Steps\n\nWhen you're ready to move beyond mock data:\n\n### Phase 1: Database Integration\n1. **MongoDB Atlas Setup**\n   ```bash\n   # Add your MongoDB connection string to .env\n   MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/ecotrack\n   ```\n\n2. **Replace Mock Models** - Swap mock data functions with MongoDB operations\n\n### Phase 2: Authentication\n1. **Firebase Setup**\n   ```bash\n   # Add Firebase credentials to .env\n   FIREBASE_PROJECT_ID=your-project-id\n   FIREBASE_PRIVATE_KEY=\"-----BEGIN PRIVATE KEY-----...\"\n   FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com\n   ```\n\n2. **Enable Auth Middleware** - Uncomment authentication in routes\n\n### Phase 3: File Upload\n1. **Cloudinary Setup**\n   ```bash\n   # Add Cloudinary credentials to .env\n   CLOUDINARY_CLOUD_NAME=your-cloud-name\n   CLOUDINARY_API_KEY=your-api-key\n   CLOUDINARY_API_SECRET=your-api-secret\n   ```\n\n## ğŸ” Mock Data Overview\n\nThe API includes realistic mock data:\n\n- **3 Challenges** - Plastic-Free July, Energy Saver, Sustainable Transport\n- **4 Tips** - Composting, Natural Cleaning, Water Conservation, Energy Saving\n- **4 Events** - Community Clean-up, Workshop, Tree Planting, Beach Cleanup\n- **3 Users** - With different roles and stats\n- **Community Stats** - Global impact metrics and trends\n\n## ğŸ› ï¸ Development Commands\n\n```bash\n# Install dependencies\nnpm install\n\n# Start development server (with nodemon)\nnpm run dev\n\n# Start production server\nnpm start\n\n# Check for updates\nnpm outdated\n```\n\n## ğŸ“š API Documentation\n\nFor detailed API specifications, see `BACKEND_SPECIFICATION.txt` which includes:\n- Complete database schemas\n- All endpoint specifications\n- Authentication implementation details\n- Validation requirements\n- Deployment guidelines\n\n## ğŸ¤ Contributing\n\nThis codebase follows clean coding principles:\n- **Readable** - Clear function and variable names\n- **Modular** - Separated concerns and reusable components\n- **Documented** - Comments explaining business logic\n- **Consistent** - Standardized patterns throughout\n\n---\n\n**Built with â¤ï¸ for a sustainable future** ğŸŒ\n\n*Ready to connect with your React frontend and start building the future of environmental awareness!*